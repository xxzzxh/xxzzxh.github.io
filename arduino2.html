<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>音乐小游戏</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Jost:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top header-inner-pages">
    <div class="container d-flex align-items-center">

      <h1 class="logo me-auto"><a href="index.html">Undefined</a></h1>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="index.html">Home</a></li>
          <li><a class="nav-link scrollto" href="index.html">Project</a></li>
          <li><a class="nav-link scrollto" href="index.html">Team</a></li>
          <li class="dropdown"><a href="#"><span>Blog</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="blog1.html">Blog 1</a></li>
            </ul>
          </li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <ol>
          <li><a href="index.html">Home</a></li>
          <li>Project</li>
        </ol>
        <h2>Rhythm master</h2>

      </div>
    </section><!-- End Breadcrumbs -->

    <!-- ======= Portfolio Details Section ======= -->
    <section id="portfolio-details" class="portfolio-details">
      <div class="container">

        <div class="row gy-4">
          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper-container">
              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <img src="assets/img/project/arduino2/1.png" alt="">
                </div>

                <div class="swiper-slide">
                  <img src="assets/img/project/arduino2/2.png" alt="">
                </div>
                <div class="swiper-slide">
                  <img src="assets/img/project/arduino2/3.png" alt="">
                </div>
                <div class="swiper-slide">
                  <img src="assets/img/project/arduino2/4.png" alt="">
                </div>
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="portfolio-info">
              <h3>简介</h3>
              使用Arduino开发板制作出的一个简易钢琴演奏小游戏，依次按照顺序按动5个按钮，可使蜂鸣器发出“do”“re”“mi”“fa”“so”的声音。
              <!-- <ul>
                <li><strong>Arduino开发板</strong> X 1</li>
                <li><strong>200欧姆电阻</strong> X 2</li>
                <li><strong>连接线</strong> X n </li>
                <li><strong>面包板</strong> X 1</li>
                <li><strong>开关</strong> X 2</li>
                <li><strong>1588LED8*8点阵</strong> X 1</li>

              </ul> -->
            </div>
            <div style="height: 40px;"></div>
            <div class="portfolio-info">
              <h3>所需硬件</h3>
              <ul>
                <li><strong>Arduino开发板</strong> X 1</li>
                <li><strong>电阻</strong> X 6</li>
                <li><strong>连接线</strong> X n </li>
                <li><strong>面包板</strong> X 2</li>
                <li><strong>按钮</strong> X 5</li>
                <li><strong>LED RGB</strong> X 1</li>
                <li><strong>蜂鸣器</strong> X 1</li>
                <li><strong>1位数码管</strong> X 1</li>
              </ul>
            </div>
            
          </div>
<!--          
          <div class="portfolio-description">
              <h3>示意图</h3>
            </div>
          </div> -->
          <div class="col-lg-8">
          <div class="portfolio-description">
            <h3>具体实现</h3>
            <p>在arduino IDE端输入一段乐谱，通过1位数码管显示首个音符，玩家根据指示点击对应按钮进行该音符的弹奏；当玩家点击某个按钮后，数码管显示下一个音符指令；玩家按要求点击对应按钮后，LED RGB亮绿灯，若点击错误则LED RGB亮红灯，直到乐谱显示完毕。</p>
            <h3>电路图</h3>

            <img src="assets/img/project/arduino2/5.png" alt="" style="width: 600px;">
            <div style="height: 40px;"></div>

            <textarea wrap="off" cols="100" rows="20" style="overflow:scroll;background-color: #f1f1f1;border:0px solid gray" style="width: 100%;">
          
              #define led_red A2     //Pin 9 连接上 led的红色引脚
              #define led_green A1
              #define led_blue A0
              int speakerPin = 3;
              //int length = 15; // the number of notes
              int num[] = {3, 3, 4, 5, 5, 4, 3, 2, 1, 1, 2, 3, 3, 2, 2};
              char notes[] = "ccggaagffeeddc"; // a space represents a rest
              int beats[] = { 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 2, 4 };
              int tempo = 300;
              int a = 7;
              int b = 6;
              int c = 5;
              int d = 11;
              int e = 10;
              int f = 8;
              int g = 9;
              int dp = 4;
              int press = 0;
              int inPin1 = 12;
              int inPin2 = 13;
              int inPin3 = A3;
              int inPin4 = A4;
              int inPin5 = A5;
              
              int switch1;
              int switch2;
              int switch3;
              int switch4;
              int switch5;
              int index = 0;
              int flag = 0;
              long debounceDelay = 50;
              long lastDebounceTime = 0;
              int buttonState;
              int lastButtonState = LOW;
              
              void setup() {
                Serial.begin(9600); //设置串口波特率9600
                pinMode(speakerPin, OUTPUT);
                pinMode(led_red, OUTPUT); //设置为输出模式
                pinMode(led_green, OUTPUT);
                pinMode(led_blue, OUTPUT);
                pinMode(inPin1, INPUT);
                pinMode(inPin2, INPUT);
                pinMode(inPin3, INPUT);
                pinMode(inPin4, INPUT);
                pinMode(inPin5, INPUT);
                int i;//定义变量
                for (i = 4; i <= 11; i++)
                pinMode(i, OUTPUT); //设置 4～11 引脚为输出模式
                press = 0;
                display(num[index]);
                lightOff();
              }
              
              void loop() {
                unsigned long currentMillis = millis();
                // tone(3,131);
                //    delay(1000);
                //digitalWrite(rLedPin,HIGH);
                // delay(200);
                switch1 = digitalRead(inPin1);
                switch2 = digitalRead(inPin2);
                switch3 = digitalRead(inPin3);
                switch4 = digitalRead(inPin4);
                switch5 = digitalRead(inPin5);
       
                if (switch1 == 1) {
                  tone(3, 262, 100);
                  //    in_tone(262, 100);
                  if (num[index] == 1) {
                    press++;
                    analogWrite(led_green, 100);
                  } else {
                    analogWrite(led_red, 100);
                  }
                  delay(250);
                  lightOff();
                  index = index + 1;
                  delay(1000);
                  Serial.println(press);
                  digital_null();
                  delay(50);
                  display(int(num[index]));
                  //      display(num[index]);
                }
                //  }
              
                if (switch2 == 1) {
                  tone(3, 294, 100);
                  if (num[index] == 2) {
                    press++;
                    analogWrite(led_green, 100);
                  } else {
                    analogWrite(led_red, 100);
                  }
                  delay(250);
                  lightOff();
                  index++;
                  delay(1000);
                  Serial.println(press);
                  digital_null();
                  delay(50);
                  display(int(num[index]));
                }
                if (switch3 == 1) {
                  tone(3, 330, 100);
                  if (num[index] == 3) {
                    press++;
                    analogWrite(led_green, 100);
                  } else {
                    analogWrite(led_red, 100);
                  }
                  delay(250);
                  lightOff();
                  index++;
                  delay(1000);
                  Serial.println(press);
                  digital_null();
                  delay(50);
                  display(int(num[index]));
                }
                if (switch4 == 1) {
                  tone(3, 349, 100);
                  if (num[index] == 4) {
                    press++;
                    analogWrite(led_green, 100);
                  } else {
                    analogWrite(led_red, 100);
                  }
                  delay(250);
                  lightOff();
                  index++;
                  delay(1000);
                  Serial.println(press);
                  digital_null();
                  delay(50);
                  display(int(num[index]));
                }
                if (switch5 == 1) {
                  tone(3, 392, 100);
                  if (num[index] == 5) {
                    press++;
                    analogWrite(led_green, 100);
                  } else {
                    analogWrite(led_red, 100);
                  }
                  delay(250);
                  lightOff();
                  index++;
                  delay(1000);
                  Serial.println(press);
                  digital_null();
                  delay(50);
                  display(int(num[index]));
                }
              
              }

              void display(int val) {
              
                if (val == 1) {
                  digital_1();
                }
                if (val == 2) {
                  digital_2();
                }
                if (val == 3) {
                  digital_3();
                }
                if (val == 4) {
                  digital_4();
                }
                if (val == 5) {
                  digital_5();
                }
              
              }
              void in_tone(int vol, int time_delay) {
                tone(3, vol, time_delay);
              }
              void digital_null(void)
              {
                unsigned char j;
                digitalWrite(c, HIGH); //给数字 5 引脚低电平，点亮 c 段
                digitalWrite(b, HIGH); //点亮 b 段
                for (j = 7; j <= 11; j++) //熄灭其余段
                  digitalWrite(j, HIGH);
                digitalWrite(dp, HIGH); //熄灭小数点 DP 段
              }
              void digital_1(void)
              {
                unsigned char j;
                digitalWrite(c, LOW); //给数字 5 引脚低电平，点亮 c 段
                digitalWrite(b, LOW); //点亮 b 段
                for (j = 7; j <= 11; j++) //熄灭其余段
                  digitalWrite(j, HIGH);
                digitalWrite(dp, HIGH); //熄灭小数点 DP 段
              }
              
              void digital_2(void)
              {
                unsigned char j;
                digitalWrite(b, LOW);
                digitalWrite(a, LOW);
                for (j = 9; j <= 11; j++)
                  digitalWrite(j, LOW);
                digitalWrite(dp, HIGH);
                digitalWrite(c, HIGH);
                digitalWrite(f, HIGH);
              }
              
              void digital_3(void)
              {
                unsigned char j;
                digitalWrite(g, LOW);
                digitalWrite(d, LOW);
                for (j = 5; j <= 7; j++)
                  digitalWrite(j, LOW);
                digitalWrite(dp, HIGH);
                digitalWrite(f, HIGH);
                digitalWrite(e, HIGH);
              }
              
              void digital_4(void)
              {
                digitalWrite(c, LOW);
                digitalWrite(b, LOW);
                digitalWrite(f, LOW);
                digitalWrite(g, LOW);
                digitalWrite(dp, HIGH);
                digitalWrite(a, HIGH);
                digitalWrite(e, HIGH);
                digitalWrite(d, HIGH);
              }
              
              void digital_5(void)
              {
                unsigned char j;
                for (j = 7; j <= 9; j++)
                  digitalWrite(j, LOW);
                digitalWrite(c, LOW);
                digitalWrite(d, LOW);
                digitalWrite(dp, HIGH);
                digitalWrite(b, HIGH);
                digitalWrite(e, HIGH);
              }
              void lightOff()
              {
                analogWrite(led_red, 255);    //首先，先把所有的灯都关闭
                analogWrite(led_green, 255);  //可以随意设置开启关闭哪些灯，搭配出不同组合有不同颜色
                analogWrite(led_blue, 255);
              }
            </textarea>
          </div>
        </div>
        <div style=" margin: 30px,50px;" >
          <h3>演示视频</h3>
          <iframe width="858px" height="483px" src="assets/media/arduino2.mp4" frameborder=0 allowfullscreen></iframe>

        </div>   
 
      </div>
    </section><!-- End Portfolio Details Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    
    <div class="container footer-bottom clearfix">
      <div class="copyright">Copyright &copy; 2021.Company name All rights reserved.</div>
      <div class="credits"></div>
    </div>
   
  </footer><!-- End Footer -->

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>